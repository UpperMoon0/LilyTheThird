#:kivy 2.0.0
#:import ColorCircle views.components.color_circle.ColorCircle

<DiscordBotStatus>:
    orientation: 'vertical'
    size_hint_y: None
    height: self.minimum_height
    spacing: dp(10) # Spacing between title and content
    padding: dp(10)
    canvas.before:
        Color:
            rgba: 0.3, 0.3, 0.3, 1 # Border color
        Line:
            width: dp(1)
            rectangle: self.x, self.y, self.width, self.height
        Color:
            rgba: 0.15, 0.15, 0.15, 1 # Background color
        Rectangle:
            pos: self.x + dp(1), self.y + dp(1)
            size: self.width - dp(2), self.height - dp(2)

    Label:
        text: "Bot Status & Control"
        font_size: '18sp'
        bold: True
        size_hint_y: None
        height: self.texture_size[1] + dp(5)
        halign: 'center'

    # This BoxLayout will now be centered
    BoxLayout:
        orientation: 'horizontal'
        size_hint_x: None # Allow the layout to take the width of its children
        width: self.minimum_width # Set width to minimum required by children
        pos_hint: {'center_x': 0.5} # Center this BoxLayout
        size_hint_y: None
        height: dp(50)
        spacing: dp(10)
        # Removed padding from here as pos_hint will center it

        ColorCircle:
            diameter: dp(30)
            circle_color: root.status_circle_color # Changed 'color' to 'circle_color'
            size_hint: None, None
            size: dp(30), dp(30)
            pos_hint: {'center_y': 0.5}

        Label:
            id: status_label
            text: root.status_text
            font_size: '14sp'
            size_hint_x: None # Take its own width
            width: self.texture_size[0] # Set width based on text content
            valign: 'middle'
            halign: 'left'
            text_size: None, None # Allow texture_size to determine width

    Button:
        id: toggle_button
        text: root.toggle_button_text
        size_hint: None, None
        size: dp(150), dp(40)
        pos_hint: {'center_x': 0.5}
        on_press: root.dispatch('on_toggle_bot_pressed')
        font_size: '16sp'
