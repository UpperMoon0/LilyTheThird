#:kivy 2.0.0
#:import RGBStrip views.components.rgb_strip.RGBStrip
#:import VTSParamList views.components.vts_param_list.VTSParamList
#:import VTSAnimationList views.components.vts_animation_list.VTSAnimationList

<VTubeTab>:
    orientation: 'vertical'
    spacing: '10dp'
    padding: '10dp'

    # RGB Strip moved to top, default height
    RGBStrip:

    BoxLayout:
        orientation: 'horizontal'
        size_hint_y: None
        height: '40dp'

        Label:
            id: status_label
            text: root.status_text
            size_hint_x: 0.7

        Button:
            id: connect_button
            text: root.button_text
            size_hint_x: 0.3
            on_press: root.toggle_connection()
            disabled: self.text in ["Connecting...", "Disconnecting..."] # Disable based on text

    # --- Animation List Component (Replaces old button) ---
    VTSAnimationList:
        id: vts_animation_list_widget
        size_hint_y: 0.4 # Give it some vertical space, adjust as needed
        # Connect the component's event to the root widget's (VTubeTab) method
        # Pass only the second argument (animation_data)
        on_trigger_animation: root.trigger_vts_animation(args[1])
        on_add_animation: root.handle_add_animation() # Connect add event

    # --- Parameter List Display ---
    Label:
        text: "Available Parameters:"
        size_hint_y: None
        height: '30dp'
        halign: 'left'
        valign: 'middle'
        text_size: self.width, None # Important for alignment

    # Replace the old ScrollView/BoxLayout with the VTSParamList component
    VTSParamList:
        id: vts_param_list_widget # ID for Python code to access
        size_hint_y: 1 # Allow it to take available vertical space
        # The component itself contains the ScrollView and manages its content
