#:kivy 2.0.0
#:import RGBStrip views.components.rgb_strip.RGBStrip
#:import VTSParamList views.components.vts_param_list.VTSParamList

<VTubeTab>:
    orientation: 'vertical'
    spacing: '10dp'
    padding: '10dp'

    # RGB Strip moved to top, default height
    RGBStrip:

    BoxLayout:
        orientation: 'horizontal'
        size_hint_y: None
        height: '40dp'

        Label:
            id: status_label
            text: root.status_text
            size_hint_x: 0.7

        Button:
            id: connect_button
            text: root.button_text
            size_hint_x: 0.3
            on_press: root.toggle_connection()
            disabled: self.text in ["Connecting...", "Disconnecting..."] # Disable based on text

    # --- New Expression Button ---
    Button:
        text: "Set Wink Smile"
        size_hint_y: None
        height: '40dp'
        on_press: root.set_wink_smile_expression()

    # --- Parameter List Display ---
    Label:
        text: "Available Parameters:"
        size_hint_y: None
        height: '30dp'
        halign: 'left'
        valign: 'middle'
        text_size: self.width, None # Important for alignment

    # Replace the old ScrollView/BoxLayout with the VTSParamList component
    VTSParamList:
        id: vts_param_list_widget # ID for Python code to access
        size_hint_y: 1 # Allow it to take available vertical space
        # The component itself contains the ScrollView and manages its content
